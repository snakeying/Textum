# 阶段2b: GLOBAL-CONTEXT 校验

读取 `docs/GLOBAL-CONTEXT.md`，输出 `FAIL/DECISION/PASS` 清单用于回到 `/scaffold` 修正；**不修改任何文件**。

## 读取

- `docs/GLOBAL-CONTEXT.md`

## 输出规则（只读）

- 不输出 GC 原文
- 若存在任何 `FAIL`：只输出 `FAIL` 清单并结束
- 仅当无 `FAIL`：输出 `DECISION`（若有）或 `PASS`

## FAIL 校验项（机械性门禁）

### 0) 文件存在

- `docs/GLOBAL-CONTEXT.md` 必须存在

### 1) 结构完整性（不得缺章）

必须包含以下一级章节（缺失即 `FAIL`）：

- `## 1. 技术栈（必填）`
- `## 2. 项目结构（必填）`
- `## 3. 枚举值定义（必填；无则写 N/A）`
- `## 4. 业务规则（必填）`
- `## 5. 权限矩阵（必填）`
- `## 6. 数据模型概览（必填；如无 DB 写 N/A）`
- `## 7. 命名规范（如适用；否则写 N/A）`
- `## 8. API规范（必填）`
- `## 9. Story依赖图（必填；拆分后回填）`

### 2) 模板占位符（不得残留）

全文（包含代码块）不得残留任何模板占位符；命中即 `FAIL`。

机械拦截（任一命中即 `FAIL`）：
- `[...]`
- `BR-###`（仍为占位）
- 任意形如 `[ ... ]` 的方括号占位（排除 Markdown 链接 `[text](...)`）

### 3) 规则表最小可用性

- 在第 4 节业务规则表（表头包含 `| ID |`）中：
  - ID 列必须包含至少 1 条 `BR-###`（具体数字：`BR-001` 形式）
  - ID 列中的 `BR-###` 必须唯一；不得出现占位符 `BR-###`

### 4) 噪音控制（不得把 PRD 片段塞进 GC）

- `docs/GLOBAL-CONTEXT.md` 中不得出现任何 **PRD 锚点引用**（出现即 `FAIL`），包括任何 `PRD#...`
- 允许出现 `docs/PRD.md` 作为“来源文件名/描述”（例如“由 PRD 抽取生成”）；但禁止引用 PRD 的具体位置/片段（如 `PRD#API-001`、PRD 章节号定位、或复制 PRD 原文大段）

### 5) `TBD` 位置（必须）

- `TBD` 仅允许出现在：
  - 第 4 节业务规则表的 “涉及Story” 列
  - 第 9 节 Story依赖图
- 若在其它任何位置出现 `TBD`：视为 `FAIL`

### 6) 项目验证命令表（必须存在；可为 N/A）

- 在第 2 节 `## 2. 项目结构（必填）` 中必须包含小节：`### 项目验证命令（如适用；否则写 N/A）`
- 该小节下必须存在表格，且表头必须为：`| 类型 | 命令 | 说明 |`
- 表格必须至少包含 1 行数据（不含表头与分隔行）
- 每行必须包含 3 列：`类型` / `命令` / `说明`（按 `|` 分隔）
- `类型` 允许任意字符串，但不得为空

## PASS（通过后动作）

- `PASS`：仅提示下一步动作：
  - 在新窗口手动运行 `/split-plan` 生成 `docs/split-plan.md`
