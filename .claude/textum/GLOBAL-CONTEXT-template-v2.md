# [项目名称] - 全局上下文（v2，低噪音）

> ⚠️ 每个 Story 执行前必读本文件；本文件是**全局约定/索引**，不是 PRD 的复述。
> 规则编号: `BR-###`（三位数字，001 起递增且唯一）；在 Story 中用 `GC#BR-###` 引用第 4 节业务规则；其余全局约定默认生效，不在每个 Story 重复描述。
> 来源约束: 本文件由 `docs/PRD.md` 抽取生成：不得新增 PRD 中不存在的新规则/新枚举/新接口/新字段；如发现缺口就停止并让用户确认。
> 占位符约定: `N/A`=不适用且无需回填；`TBD`=待回填（仅允许出现在第 4 节“涉及Story”和第 9 节依赖图，完成 `/backfill` 后应消除）。
> 体积控制（必须遵守）:
> - 不粘贴 PRD 原文大段；不写接口/表的逐项详情；不列“所有文件/所有字段/所有路由”。
> - 每节只写**全局共用**的内容；模块/接口特有细节留在 PRD / Story。

## 1. 技术栈（必填）

> 写法: 只写“选型名 + 关键版本/运行时”（如有）；不要写长段理由。

| 层 | 选型 |
|----|------|
| 后端 | [框架/语言] |
| 前端 | [框架/库] |
| 数据库 | [类型] |
| 其他 | [缓存/消息队列/...] |

## 2. 项目结构（必填）

> 写法: 只列顶层/关键目录与职责；目录树深度建议 ≤ 3；不要列第三方依赖目录。

```
project/
├── [目录]/    # [职责]
│   └── ...
└── ...
```

### 项目验证命令（如适用；否则写 N/A）

| 类型 | 命令 | 说明 |
|------|------|------|
| test | N/A | N/A |
| lint | N/A | N/A |
| build | N/A | N/A |

## 3. 枚举值定义（必填；无则写 N/A）

> 写法: 只写“字段→可选值→一句话用途”；不要复制状态机全文。

| 字段 | 可选值 | 说明 |
|------|--------|------|
| [表.字段/上下文] | [val1, val2, ...] | [用途] |

## 4. 业务规则（必填）

> 写法: 每条规则尽量一行；规则必须可执行/可测试；不要写散文。

| ID | 规则 | 涉及Story |
|----|------|-----------|
| BR-### | [规则描述] | TBD |
| BR-### | [规则描述] | TBD |

## 5. 权限矩阵（必填）

> 写法: 只给“全局口径”；具体接口权限在 PRD `9.*`；本矩阵必须能解释所有接口的权限列。

| 操作 | [角色1] | [角色2] | [角色N] |
|------|---------|---------|---------|
| [操作] | A/D/O | A/D/O | A/D/O |

## 6. 数据模型概览（必填；如无 DB 写 N/A）

> 写法: 只写“关系 + 核心表摘要 + 全局字段约定”；不要复制 PRD 的逐表字段表。

### 表关系
```
[表A] ─< [表B] >─ [表C]
```

### 全局字段约定（如适用；否则写 N/A）
| 字段 | 说明 |
|------|------|
| `id` | 主键 |
| `created_at` | 创建时间 |
| `updated_at` | 更新时间 |
| `[tenant_id/org_id]` | 多租户/组织隔离（如适用） |
| `[deleted_at/is_deleted]` | 软删除（如适用） |

### 核心表（如适用；否则写 N/A）

> 写法: 只列核心表；每行“表名 + 主要字段摘要（最多 6 个）”。

| 表 | 主要字段 |
|----|----------|
| [表名] | [字段列表] |

## 7. 命名规范（如适用；否则写 N/A）

> 写法: 只写“必须遵守”的规范；可用 1 行示例；不要写冗长规范文档。

| 类别 | 规范 | 示例 |
|------|------|------|
| 表名 | [规范] | [示例] |
| 字段 | [规范] | [示例] |
| API | [规范] | [示例] |
| 组件 | [规范] | [示例] |

## 8. API规范（必填）

> 写法: 只写全局口径（认证/分页/错误码/响应包装/幂等性/排序语义）；不要列接口清单，不要写单接口详情。

### 基础（必填）
- Base URL: `[例如: /api]`
- 认证方式: [JWT/Cookie/Session/...]
- 权限校验: [按第 5 节权限矩阵执行]
- 分页/排序/筛选: [是否支持 + 参数约定（例如 `page/pageSize` 或 `cursor`，`sort/order`）]

### 响应格式
```json
{ "data": {}, "message": "" }
```

### 错误码（必填）
| 状态 | 说明 |
|------|------|
| [4XX] | [场景] |

## 9. Story依赖图（必填；拆分后回填）

TBD

