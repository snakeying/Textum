# [项目名称] - PRD v1.0

> 状态: Draft
> 定稿门禁: 用户确认定稿后将状态手动改为 `Final`；进入 `/scaffold` `/split` `/split-check` 前必须为 `Final`
> 稳定ID: 表用 `TBL-###`，接口用 `API-###`（001 起递增且唯一），用于 Story 引用（建议同时给出 `PRD:Lx-Ly`）
> 写作规则: 优先用表格/清单；每条需求/规则尽量一行；全局约束集中在第 4/6/7/9 节，避免在各模块重复描述

## 1. 项目概述

### 1.1 一句话简介
[1-2 句话描述项目做什么、给谁用、解决什么问题]

### 1.2 目标（Goals）
- [G-01] [目标描述（可验证）]
- [G-02] [...]

### 1.3 非目标（Non-goals）
- [NG-01] [明确不做什么，防止范围蔓延]
- [NG-02] [...]

### 1.4 成功标准（Success Metrics，可选）
| 指标 | 目标值 | 备注 |
|------|--------|------|
| [指标] | [数值/阈值] | [口径说明] |

## 2. 范围与假设

### 2.1 交付范围（In Scope）
- [S-01] [...]
- [S-02] [...]

### 2.2 不在范围（Out of Scope）
- [OS-01] [...]
- [OS-02] [...]

### 2.3 关键假设与约束
| ID | 假设/约束 | 影响 |
|----|-----------|------|
| A-01 | [例如：必须支持移动端浏览器] | [对技术/交付的影响] |
| A-02 | [...] | [...] |

## 3. 目标用户与角色

### 3.1 用户角色
| 角色 | 描述 | 典型场景 |
|------|------|----------|
| [Role-01] | [是谁] | [会做什么] |
| [Role-02] | [...] | [...] |

### 3.2 术语表（可选）
| 术语 | 定义 | 备注 |
|------|------|------|
| [Term] | [一句话定义] | [同义词/边界] |

## 4. 权限矩阵（必填）

> 记号建议: `A=允许` `D=禁止` `O=仅自己的/所属组织(或资源范围)`（也可按项目自定义，但需统一）

| 操作 | [Role-01] | [Role-02] | [Role-N] | 说明 |
|------|-----------|-----------|----------|------|
| [Resource]:Create | A/D/O | A/D/O | A/D/O | [...] |
| [Resource]:Read | A/D/O | A/D/O | A/D/O | [...] |
| [Resource]:Update | A/D/O | A/D/O | A/D/O | [...] |
| [Resource]:Delete | A/D/O | A/D/O | A/D/O | [...] |

## 5. 核心功能

### 5.1 功能清单（必填）
| 模块ID | 模块名 | 一句话说明 | 优先级 | 依赖 |
|--------|--------|------------|--------|------|
| M-01 | [模块名] | [说明] | [P0/P1/P2] | [无 / M-xx] |
| M-02 | [...] | [...] | [...] | [...] |

### 5.2 功能规格（按模块填写）

#### 5.2.1 [M-01 模块名]
**功能点**
- [FP-01] [...]
- [FP-02] [...]

**关键场景/验收（必填；建议用表格，便于测试与拆 Story）**
| 场景ID | 参与者 | 前置条件（Given） | 用户操作（When） | 系统响应（Then） | 失败/边界 | 备注 |
|--------|--------|-------------------|------------------|------------------|----------|------|
| SC-01 | [角色] | [...] | [...] | [...] | [...] | [...] |
| SC-02 | [...] | [...] | [...] | [...] | [...] | [...] |

**页面/路由（可选）**
```
[路由]    [页面/入口说明]
```

#### 5.2.2 [M-02 模块名]
（按 5.2.1 结构重复）

## 6. 业务规则（必填）

> 规则编号格式: `BR-###`（三位数字，001 起递增且唯一）。规则必须可执行/可测试；每条规则尽量一行；复杂规则拆成多条并各自编号。

| 规则ID | 规则描述 | 适用范围（模块/对象） | 例外/备注 |
|--------|----------|------------------------|----------|
| BR-### | [...] | [M-xx / 表/接口] | [...] |
| BR-### | [...] | [...] | [...] |

## 7. 状态与枚举（必填）

### 7.1 枚举值
| 字段（表.字段/上下文） | 可选值 | 默认值 | 说明 |
|------------------------|--------|--------|------|
| `[table].[field]` | `val1`, `val2` | `val1` | [...] |

### 7.2 状态机（流程型实体必填）
**[实体名] 状态流转**
```
[State A] -> [State B] -> [State C]
```

| 当前状态 | 触发事件 | 下一状态 | 权限/条件 | 备注 |
|----------|----------|----------|----------|------|
| [A] | [事件] | [B] | [Role/条件] | [...] |

## 8. 数据模型（必填）

### 8.1 表清单（可选）
| 表ID | 表名 | 用途 | 主要字段（摘要） |
|------|------|------|------------------|
| `TBL-###` | `[table]` | [...] | `id`, `...` |

### 8.2 表定义（逐表填写，便于精确行号引用）

#### 8.2.1 `TBL-###` `[table_name]`
| 字段 | 类型 | 可空 | 默认值 | 约束/索引 | 说明 |
|------|------|------|--------|----------|------|
| `id` | INTEGER PK | N |  | PK | 主键 |
| `[field]` | [类型] | [Y/N] | [默认] | [UNIQUE/FK/INDEX] | [说明] |

**约束（可选）**
- [CON-01] [例如：(`org_id`,`email`) 唯一]
- [CON-02] [...]

**索引（可选）**
- [IDX-01] [字段/组合字段] - [用途]

#### 8.2.2 `TBL-###` `[table_name_2]`
（按 8.2.1 结构重复）

### 8.3 表关系
```
[表A] 1──n [表B] n──1 [表C]
```

### 8.4 数据保留/删除/匿名化（可选）
| 对象 | 策略（Hard/Soft/Anonymize） | 触发条件 | 保留期限 | 备注 |
|------|----------------------------|----------|----------|------|
| [对象] | [策略] | [例如：用户自助删除] | [例如：30天] | [...] |

### 8.5 命名规范（可选）
| 类别 | 规范 | 示例 |
|------|------|------|
| 表名 | [规范] | [示例] |
| 字段名 | [规范] | [示例] |
| API | [规范] | [示例] |

## 9. 接口设计（必填）

### 9.1 通用约定
**基础**
- Base URL: `[例如: /api]`
- 认证方式: [JWT/Cookie/Session/...]
- 权限校验: [按第 4 节权限矩阵执行]

**分页/排序/筛选（如有）**
- 分页参数: `page`, `pageSize`（或 `cursor`）
- 排序参数: `sort`, `order`
- 筛选参数: [约定字段与语义]

**响应格式**
```json
{ "data": {}, "message": "" }
```

**错误码（必填）**
| 状态码 | 业务含义 | 典型触发 |
|--------|----------|----------|
| 400 | [Bad Request] | [参数校验失败] |
| 401 | [Unauthorized] | [未登录/Token无效] |
| 403 | [Forbidden] | [无权限] |
| 404 | [Not Found] | [资源不存在] |
| 409 | [Conflict] | [唯一约束冲突/状态冲突] |

### 9.2 接口清单（必填）
| 接口ID | 名称 | 方法&路径 | 模块 | 权限 | 说明 |
|--------|------|----------|------|------|------|
| `API-###` | [接口名] | `[METHOD] /api/...` | [M-xx] | [Role/Operation] | [...] |

### 9.3 接口详情（逐个填写，便于精确行号引用）

#### 9.3.1 `API-###` [接口名称]
- **路径**: `[METHOD] /api/...`
- **权限**: [按权限矩阵：Operation + 范围]
- **请求**: `{ ... }`
- **响应**: `{ ... }`
- **失败场景**:
  - `[状态码]` [触发条件]

## 10. 非功能需求（必填，可写 N/A）
| 类别 | 需求 | 验收口径 |
|------|------|----------|
| 安全 | [例如：敏感字段加密/脱敏] | [如何验证] |
| 审计 | [例如：记录关键管理操作] | [日志字段/保留期] |
| 性能 | [例如：列表接口 < 300ms(P95)] | [压测口径] |
| 可观测 | [例如：关键链路有 traceId] | [日志/指标] |

## 11. 补充说明（可选）
- [实现备注/外部依赖/迁移计划]
